{"version":3,"sources":["webpack:///./node_modules/core-js/modules/_strict-method.js","webpack:///./node_modules/core-js/modules/es6.array.sort.js","webpack:///./src/views/Authorize.vue?6826","webpack:///src/views/Authorize.vue","webpack:///./src/views/Authorize.vue?2001","webpack:///./src/views/Authorize.vue"],"names":["fails","__webpack_require__","module","exports","method","arg","call","$export","aFunction","toObject","$sort","sort","test","P","F","undefined","comparefn","this","render","_vm","_h","$createElement","_c","_self","attrs","title","staticClass","hasAuthority","isWeb","failed","transactionId","_e","uri","on","submit","$event","preventDefault","handleSubmit","username","size","_v","_s","authority","account","name","hasRequiredKey","type","disabled","loading","to","query","redirect","$route","fullPath","click","handleReject","callback","href","_f","error","id","staticRenderFns","Authorizevue_type_script_lang_js_","data","Object","utils","params","auth","redirect_uri","concat","computed","$store","state","auths","account_auths","map","indexOf","keys","active","methods","objectSpread","vuex_esm","_this","memo_key","json_metadata","JSON","parse","stringify_default","push","weight_threshold","a","b","updateAccount","then","confirmation","loadAccount","$router","window","location","catch","err","console","views_Authorizevue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/authorize.62285b9b.js","sourcesContent":["'use strict';\nvar fails = require('./_fails');\n\nmodule.exports = function (method, arg) {\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call\n    arg ? method.call(null, function () { /* empty */ }, 1) : method.call(null);\n  });\n};\n","'use strict';\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar toObject = require('./_to-object');\nvar fails = require('./_fails');\nvar $sort = [].sort;\nvar test = [1, 2, 3];\n\n$export($export.P + $export.F * (fails(function () {\n  // IE8-\n  test.sort(undefined);\n}) || !fails(function () {\n  // V8 bug\n  test.sort(null);\n  // Old WebKit\n}) || !require('./_strict-method')($sort)), 'Array', {\n  // 22.1.3.25 Array.prototype.sort(comparefn)\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? $sort.call(toObject(this))\n      : $sort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('Header',{attrs:{\"title\":\"Authorize (active)\"}}),_c('div',{staticClass:\"p-4 after-header\"},[_c('div',{staticClass:\"container-sm mx-auto\"},[(!_vm.hasAuthority && _vm.isWeb && !_vm.failed && !_vm.transactionId)?_c('OpenExternal',{staticClass:\"hide-sm\",attrs:{\"uri\":_vm.uri}}):_vm._e(),(!_vm.hasAuthority && !_vm.failed && !_vm.transactionId)?_c('form',{staticClass:\"mb-4\",on:{\"submit\":function($event){$event.preventDefault();return _vm.handleSubmit($event)}}},[_c('div',{staticClass:\"mb-4\"},[(_vm.username)?_c('div',{staticClass:\"mb-4 text-center\"},[_c('Avatar',{attrs:{\"username\":_vm.username,\"size\":80}}),_c('h4',{staticClass:\"mb-0 mt-2\"},[_vm._v(_vm._s(_vm.username))])],1):_vm._e(),_c('p',[_vm._v(\"\\n            Do you want to update your account to authorize \"),_c('b',[_vm._v(_vm._s(_vm.username))]),_vm._v(\" to do\\n            \"),_c('b',[_vm._v(_vm._s(_vm.authority))]),_vm._v(\" operations on your behalf?\\n          \")]),(_vm.authority === 'active')?_c('div',{staticClass:\"flash flash-error mt-4\"},[_vm._v(\"\\n            Giving active authority enables the authorized account to do fund transfers from your\\n            account, this should be used with utmost care.\\n          \")]):_vm._e(),(_vm.account.name && _vm.hasRequiredKey === false)?_c('div',{staticClass:\"flash flash-warn mt-4\"},[_vm._v(\"\\n            This transaction requires your \"),_c('b',[_vm._v(\"active\")]),_vm._v(\" key.\\n          \")]):_vm._e()]),_c('div',{staticClass:\"mt-2\"},[(!_vm.account.name || _vm.hasRequiredKey === false)?_c('router-link',{staticClass:\"btn btn-large btn-blue mr-2 mb-2\",attrs:{\"to\":{\n              name: 'login',\n              query: { redirect: this.$route.fullPath, authority: 'active' },\n            }}},[_vm._v(\"\\n            Continue\\n          \")]):_c('button',{staticClass:\"btn btn-large btn-success mb-2 mr-2\",attrs:{\"type\":\"submit\",\"disabled\":_vm.loading}},[_vm._v(\"\\n            Authorize\\n          \")]),_c('button',{staticClass:\"btn btn-large mb-2\",on:{\"click\":_vm.handleReject}},[_vm._v(\"\\n            Cancel\\n          \")])],1)]):_vm._e(),(_vm.hasAuthority && !_vm.failed && !_vm.transactionId)?_c('div',[_c('p',{staticClass:\"mb-4\"},[_vm._v(\"\\n          You already authorize the account \"),_c('b',[_vm._v(_vm._s(_vm.username))]),_vm._v(\" to do\\n          \"),_c('b',[_vm._v(_vm._s(_vm.authority))]),_vm._v(\" operations on your behalf.\\n        \")]),(_vm.callback)?[(_vm.callback[0] === '/')?_c('router-link',{staticClass:\"btn btn-large btn-blue mb-2 mt-2\",attrs:{\"to\":_vm.callback}},[_vm._v(\"\\n            Continue\\n          \")]):_c('a',{staticClass:\"btn btn-large btn-blue mb-2 mt-2\",attrs:{\"href\":_vm.callback}},[_vm._v(\"\\n            Continue to \"+_vm._s(_vm._f(\"parseUrl\")(_vm.callback))+\"\\n          \")])]:_vm._e()],2):_vm._e(),(!_vm.loading && _vm.failed)?_c('Error',{attrs:{\"error\":_vm.error}}):_vm._e(),(!_vm.loading && !!_vm.transactionId)?_c('Confirmation',{attrs:{\"id\":_vm.transactionId}}):_vm._e()],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <Header title=\"Authorize (active)\" />\n    <div class=\"p-4 after-header\">\n      <div class=\"container-sm mx-auto\">\n        <OpenExternal\n          v-if=\"!hasAuthority && isWeb && !failed && !transactionId\"\n          :uri=\"uri\"\n          class=\"hide-sm\"\n        />\n        <form\n          v-if=\"!hasAuthority && !failed && !transactionId\"\n          @submit.prevent=\"handleSubmit\"\n          class=\"mb-4\"\n        >\n          <div class=\"mb-4\">\n            <div class=\"mb-4 text-center\" v-if=\"username\">\n              <Avatar :username=\"username\" :size=\"80\" />\n              <h4 class=\"mb-0 mt-2\">{{ username }}</h4>\n            </div>\n            <p>\n              Do you want to update your account to authorize <b>{{ username }}</b> to do\n              <b>{{ authority }}</b> operations on your behalf?\n            </p>\n            <div class=\"flash flash-error mt-4\" v-if=\"authority === 'active'\">\n              Giving active authority enables the authorized account to do fund transfers from your\n              account, this should be used with utmost care.\n            </div>\n            <div class=\"flash flash-warn mt-4\" v-if=\"account.name && hasRequiredKey === false\">\n              This transaction requires your <b>active</b> key.\n            </div>\n          </div>\n          <div class=\"mt-2\">\n            <router-link\n              :to=\"{\n                name: 'login',\n                query: { redirect: this.$route.fullPath, authority: 'active' },\n              }\"\n              class=\"btn btn-large btn-blue mr-2 mb-2\"\n              v-if=\"!account.name || hasRequiredKey === false\"\n            >\n              Continue\n            </router-link>\n            <button\n              type=\"submit\"\n              class=\"btn btn-large btn-success mb-2 mr-2\"\n              :disabled=\"loading\"\n              v-else\n            >\n              Authorize\n            </button>\n            <button class=\"btn btn-large mb-2\" @click=\"handleReject\">\n              Cancel\n            </button>\n          </div>\n        </form>\n        <div v-if=\"hasAuthority && !failed && !transactionId\">\n          <p class=\"mb-4\">\n            You already authorize the account <b>{{ username }}</b> to do\n            <b>{{ authority }}</b> operations on your behalf.\n          </p>\n          <template v-if=\"callback\">\n            <router-link\n              v-if=\"callback[0] === '/'\"\n              :to=\"callback\"\n              class=\"btn btn-large btn-blue mb-2 mt-2\"\n            >\n              Continue\n            </router-link>\n            <a v-else :href=\"callback\" class=\"btn btn-large btn-blue mb-2 mt-2\">\n              Continue to {{ callback | parseUrl }}\n            </a>\n          </template>\n        </div>\n        <Error v-if=\"!loading && failed\" :error=\"error\" />\n        <Confirmation v-if=\"!loading && !!transactionId\" :id=\"transactionId\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { mapActions } from 'vuex';\nimport { isWeb, buildSearchParams } from '@/helpers/utils';\nimport { getAuthority } from '@/helpers/auth';\n\nexport default {\n  data() {\n    return {\n      loading: false,\n      failed: false,\n      error: false,\n      transactionId: '',\n      isWeb: isWeb(),\n      username: this.$route.params.username,\n      authority: getAuthority(this.$route.query.authority, 'posting'),\n      callback: this.$route.query.redirect_uri,\n      uri: `steem://authorize/${this.$route.params.username}${buildSearchParams(this.$route)}`,\n    };\n  },\n  computed: {\n    account() {\n      return this.$store.state.auth.account;\n    },\n    hasAuthority() {\n      if (this.account.name) {\n        const auths = this.account[this.authority].account_auths.map(auth => auth[0]);\n        return auths.indexOf(this.username) !== -1;\n      }\n      return false;\n    },\n    hasRequiredKey() {\n      return !!(this.$store.state.auth.username && this.$store.state.auth.keys.active);\n    },\n  },\n  methods: {\n    ...mapActions(['updateAccount', 'loadAccount']),\n    handleSubmit() {\n      const { username, authority, callback, account } = this;\n      this.loading = true;\n      const data = {\n        account: account.name,\n        memo_key: account.memo_key,\n        json_metadata: account.json_metadata,\n      };\n      data[authority] = JSON.parse(JSON.stringify(account[authority]));\n      data[authority].account_auths.push([username, account[authority].weight_threshold]);\n      data[authority].account_auths.sort((a, b) => (a[0] > b[0] ? 1 : -1));\n\n      this.updateAccount(data)\n        .then(confirmation => {\n          this.loadAccount().then(() => {\n            if (isWeb && callback) {\n              if (callback[0] === '/') {\n                this.$router.push(callback);\n              } else {\n                window.location = callback;\n              }\n            } else {\n              this.transactionId = confirmation.id;\n              this.failed = false;\n              this.loading = false;\n            }\n          });\n        })\n        .catch(err => {\n          this.error = err;\n          console.error('Failed to broadcast transaction', err);\n          this.failed = true;\n          this.loading = false;\n        });\n    },\n    handleReject() {\n      this.$router.push('/');\n    },\n  },\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authorize.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Authorize.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Authorize.vue?vue&type=template&id=48ad78ca&\"\nimport script from \"./Authorize.vue?vue&type=script&lang=js&\"\nexport * from \"./Authorize.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}