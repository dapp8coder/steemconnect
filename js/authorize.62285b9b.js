(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["authorize"],{"2f21":function(t,a,e){"use strict";var n=e("79e5");t.exports=function(t,a){return!!t&&n(function(){a?t.call(null,function(){},1):t.call(null)})}},"55dd":function(t,a,e){"use strict";var n=e("5ca1"),r=e("d8e8"),s=e("4bf8"),i=e("79e5"),o=[].sort,u=[1,2,3];n(n.P+n.F*(i(function(){u.sort(void 0)})||!i(function(){u.sort(null)})||!e("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(s(this)):o.call(s(this),r(t))}})},"791c":function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header",{attrs:{title:"Authorize (active)"}}),e("div",{staticClass:"p-4 after-header"},[e("div",{staticClass:"container-sm mx-auto"},[t.hasAuthority||!t.isWeb||t.failed||t.transactionId?t._e():e("OpenExternal",{staticClass:"hide-sm",attrs:{uri:t.uri}}),t.hasAuthority||t.failed||t.transactionId?t._e():e("form",{staticClass:"mb-4",on:{submit:function(a){return a.preventDefault(),t.handleSubmit(a)}}},[e("div",{staticClass:"mb-4"},[t.username?e("div",{staticClass:"mb-4 text-center"},[e("Avatar",{attrs:{username:t.username,size:80}}),e("h4",{staticClass:"mb-0 mt-2"},[t._v(t._s(t.username))])],1):t._e(),e("p",[t._v("\n            Do you want to update your account to authorize "),e("b",[t._v(t._s(t.username))]),t._v(" to do\n            "),e("b",[t._v(t._s(t.authority))]),t._v(" operations on your behalf?\n          ")]),"active"===t.authority?e("div",{staticClass:"flash flash-error mt-4"},[t._v("\n            Giving active authority enables the authorized account to do fund transfers from your\n            account, this should be used with utmost care.\n          ")]):t._e(),t.account.name&&!1===t.hasRequiredKey?e("div",{staticClass:"flash flash-warn mt-4"},[t._v("\n            This transaction requires your "),e("b",[t._v("active")]),t._v(" key.\n          ")]):t._e()]),e("div",{staticClass:"mt-2"},[t.account.name&&!1!==t.hasRequiredKey?e("button",{staticClass:"btn btn-large btn-success mb-2 mr-2",attrs:{type:"submit",disabled:t.loading}},[t._v("\n            Authorize\n          ")]):e("router-link",{staticClass:"btn btn-large btn-blue mr-2 mb-2",attrs:{to:{name:"login",query:{redirect:this.$route.fullPath,authority:"active"}}}},[t._v("\n            Continue\n          ")]),e("button",{staticClass:"btn btn-large mb-2",on:{click:t.handleReject}},[t._v("\n            Cancel\n          ")])],1)]),!t.hasAuthority||t.failed||t.transactionId?t._e():e("div",[e("p",{staticClass:"mb-4"},[t._v("\n          You already authorize the account "),e("b",[t._v(t._s(t.username))]),t._v(" to do\n          "),e("b",[t._v(t._s(t.authority))]),t._v(" operations on your behalf.\n        ")]),t.callback?["/"===t.callback[0]?e("router-link",{staticClass:"btn btn-large btn-blue mb-2 mt-2",attrs:{to:t.callback}},[t._v("\n            Continue\n          ")]):e("a",{staticClass:"btn btn-large btn-blue mb-2 mt-2",attrs:{href:t.callback}},[t._v("\n            Continue to "+t._s(t._f("parseUrl")(t.callback))+"\n          ")])]:t._e()],2),!t.loading&&t.failed?e("Error",{attrs:{error:t.error}}):t._e(),!t.loading&&t.transactionId?e("Confirmation",{attrs:{id:t.transactionId}}):t._e()],1)])],1)},r=[],s=(e("55dd"),e("f499")),i=e.n(s),o=e("cebc"),u=(e("ac6a"),e("7f7f"),e("2f62")),c=e("a2b6"),l=e("40c1"),h={data:function(){return{loading:!1,failed:!1,error:!1,transactionId:"",isWeb:Object(c["k"])(),username:this.$route.params.username,authority:Object(l["b"])(this.$route.query.authority,"posting"),callback:this.$route.query.redirect_uri,uri:"steem://authorize/".concat(this.$route.params.username).concat(Object(c["c"])(this.$route))}},computed:{account:function(){return this.$store.state.auth.account},hasAuthority:function(){if(this.account.name){var t=this.account[this.authority].account_auths.map(function(t){return t[0]});return-1!==t.indexOf(this.username)}return!1},hasRequiredKey:function(){return!(!this.$store.state.auth.username||!this.$store.state.auth.keys.active)}},methods:Object(o["a"])({},Object(u["b"])(["updateAccount","loadAccount"]),{handleSubmit:function(){var t=this,a=this.username,e=this.authority,n=this.callback,r=this.account;this.loading=!0;var s={account:r.name,memo_key:r.memo_key,json_metadata:r.json_metadata};s[e]=JSON.parse(i()(r[e])),s[e].account_auths.push([a,r[e].weight_threshold]),s[e].account_auths.sort(function(t,a){return t[0]>a[0]?1:-1}),this.updateAccount(s).then(function(a){t.loadAccount().then(function(){c["k"]&&n?"/"===n[0]?t.$router.push(n):window.location=n:(t.transactionId=a.id,t.failed=!1,t.loading=!1)})}).catch(function(a){t.error=a,console.error("Failed to broadcast transaction",a),t.failed=!0,t.loading=!1})},handleReject:function(){this.$router.push("/")}})},d=h,b=e("2877"),m=Object(b["a"])(d,n,r,!1,null,null,null);a["default"]=m.exports}}]);
//# sourceMappingURL=authorize.62285b9b.js.map