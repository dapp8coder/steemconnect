(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["revoke"],{9708:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Header",{attrs:{title:"Revoke (active)"}}),e("div",{staticClass:"p-4 after-header"},[e("div",{staticClass:"container-sm mx-auto"},[t.hasAuthority&&t.isWeb&&!t.failed&&!t.transactionId?e("OpenExternal",{staticClass:"hide-sm",attrs:{uri:t.uri}}):t._e(),!t.hasAuthority||t.failed||t.transactionId?t._e():e("form",{staticClass:"mb-4",on:{submit:function(a){return a.preventDefault(),t.handleSubmit(a)}}},[e("div",{staticClass:"mb-4"},[t.username?e("div",{staticClass:"mb-4 text-center"},[e("Avatar",{attrs:{username:t.username,size:80}}),e("h4",{staticClass:"mb-0 mt-2"},[t._v(t._s(t.username))])],1):t._e(),e("p",[t._v("\n            Do you want to update your account to revoke "),e("b",[t._v(t._s(t.username))]),t._v(" to do\n            "),e("b",[t._v(t._s(t.authority))]),t._v(" operations on your behalf?\n          ")]),t.account.name&&!1===t.hasRequiredKey?e("div",{staticClass:"flash flash-warn mt-4"},[t._v("\n            This transaction requires your "),e("b",[t._v("active")]),t._v(" key.\n          ")]):t._e()]),e("div",{staticClass:"mt-2"},[t.account.name&&!1!==t.hasRequiredKey?e("button",{staticClass:"btn btn-large btn-success mb-2 mr-2",attrs:{type:"submit",disabled:t.loading}},[t._v("\n            Revoke\n          ")]):e("router-link",{staticClass:"btn btn-large btn-blue mr-2 mb-2",attrs:{to:{name:"login",query:{redirect:this.$route.fullPath,authority:"active"}}}},[t._v("\n            Continue\n          ")]),e("button",{staticClass:"btn btn-large mb-2",on:{click:t.handleReject}},[t._v("\n            Cancel\n          ")])],1)]),t.hasAuthority||t.failed||t.transactionId?t._e():e("div",[e("p",{staticClass:"mb-4"},[t._v("\n          You already revoked the account "),e("b",[t._v(t._s(t.username))]),t._v(" to do\n          "),e("b",[t._v(t._s(t.authority))]),t._v(" operations on your behalf.\n        ")]),t.callback?["/"===t.callback[0]?e("router-link",{staticClass:"btn btn-large btn-blue mb-2 mt-2",attrs:{to:t.callback}},[t._v("\n            Continue\n          ")]):e("a",{staticClass:"btn btn-large btn-blue mb-2 mt-2",attrs:{href:t.callback}},[t._v("\n            Continue to "+t._s(t._f("parseUrl")(t.callback))+"\n          ")])]:t._e()],2),!t.loading&&t.failed?e("Error",{attrs:{error:t.error}}):t._e(),!t.loading&&t.transactionId?e("Confirmation",{attrs:{id:t.transactionId}}):t._e()],1)])],1)},s=[],r=e("f499"),i=e.n(r),o=e("cebc"),c=(e("ac6a"),e("7f7f"),e("2f62")),u=e("a2b6"),l=e("40c1"),h={data:function(){return{loading:!1,failed:!1,error:!1,transactionId:"",isWeb:Object(u["k"])(),username:this.$route.params.username,authority:Object(l["b"])(this.$route.query.authority,"posting"),callback:this.$route.query.redirect_uri,uri:"steem://revoke/".concat(this.$route.params.username).concat(Object(u["c"])(this.$route))}},computed:{account:function(){return this.$store.state.auth.account},hasAuthority:function(){if(this.account.name){var t=this.account[this.authority].account_auths.map(function(t){return t[0]});return-1!==t.indexOf(this.username)}return!0},hasRequiredKey:function(){return!(!this.$store.state.auth.username||!this.$store.state.auth.keys.active)}},methods:Object(o["a"])({},Object(c["b"])(["updateAccount","loadAccount"]),{handleSubmit:function(){var t=this,a=this.username,e=this.authority,n=this.callback,s=this.account;this.loading=!0;var r={account:s.name,memo_key:s.memo_key,json_metadata:s.json_metadata};r[e]=JSON.parse(i()(s[e])),r[e].account_auths.forEach(function(t,n){t[0]===a&&r[e].account_auths.splice(n,1)}),this.updateAccount(r).then(function(a){t.loadAccount().then(function(){u["k"]&&n?"/"===n[0]?t.$router.push(n):window.location=n:(t.transactionId=a.id,t.failed=!1,t.loading=!1)})}).catch(function(a){t.error=a,console.error("Failed to broadcast transaction",a),t.failed=!0,t.loading=!1})},handleReject:function(){this.$router.push("/")}})},d=h,b=e("2877"),m=Object(b["a"])(d,n,s,!1,null,null,null);a["default"]=m.exports}}]);
//# sourceMappingURL=revoke.65895cd5.js.map